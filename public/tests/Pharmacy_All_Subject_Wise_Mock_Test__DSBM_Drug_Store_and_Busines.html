<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>DSBM (Drug Store and Business Management) Mock Test</title>
<style>
:root{--bg:#f6f7fb;--card:#fff;--border:#e6eaf3;--text:#0b192d;--muted:#6b7280;--blue:#2b8ef6;--blue2:#0ea5e9;--green:#22c55e;--red:#ef4444;--purple:#7c3aed;--shadow:0 2px 12px rgba(2,6,23,.06)}
*{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
/* Top bar */
.top{background:#fff;border-bottom:1px solid var(--border);padding:12px 18px;display:flex;align-items:center;gap:12px}
.bcrumb{font-weight:700} .bchip{margin-left:10px;background:#eef2ff;border:1px solid #c7d2fe;color:#374151;border-radius:8px;padding:3px 8px;font-weight:700}
.tsp{flex:1} .timer{background:#eef2ff;border:1px solid #c7d2fe;padding:4px 10px;border-radius:8px;font-weight:700}
/* Main layout */
.main{display:grid;grid-template-columns:1fr 340px;gap:16px;max-width:1200px;margin:0 auto;padding:16px}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);overflow:hidden}
/* Question header row (marking + timer + review) */
.qhdr{display:flex;align-items:center;gap:10px;padding:12px 16px;border-bottom:1px solid var(--border)}
.pill{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-weight:700}
.pill.green{background:#ecfdf5;border-color:#bbf7d0;color:#166534} .pill.red{background:#fee2e2;border-color:#fecaca;color:#991b1b}
.qwrap{padding:16px}
.qid{color:#6b7280;font-size:13px;margin-bottom:6px}
.qtext{font-weight:700;line-height:1.6;margin:6px 0 14px 0}
.opt{display:flex;align-items:center;gap:10px;border:1px solid var(--border);border-radius:10px;padding:12px;margin:10px 0;background:#fff;cursor:pointer;transition:box-shadow .15s,border-color .15s}
.rdot{width:16px;height:16px;border-radius:50%;border:2px solid #cbd5e1;background:#fff}
.opt.selected{border-color:var(--blue);box-shadow:0 0 0 3px rgba(43,142,246,.15)}
/* bottom actions */
.bottom{display:flex;justify-content:space-between;gap:10px;padding:12px 16px;border-top:1px solid var(--border);background:#fff}
.btn{border:1px solid var(--border);background:#fff;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600}
.btn.ghost{background:#f8fafc}
.btn.primary{background:var(--blue);color:#fff;border-color:var(--blue)}
/* Sidebar */
.sidebar{padding:12px}
.user{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.uav{width:44px;height:44px;border-radius:50%;background:#fee2e2;color:#7f1d1d;font-weight:800;display:flex;align-items:center;justify-content:center}
.uname{font-weight:700}
.stat{border-top:1px solid var(--border);padding-top:10px;margin-top:6px}
.statrow{display:flex;align-items:center;gap:8px;margin:8px 0;color:#111827}
.sdot{width:10px;height:10px;border-radius:50%}
.sgreen{background:#22c55e}.sred{background:#ef4444}.sgrey{background:#94a3b8}.spurple{background:#7c3aed}
.palet{margin-top:10px;border-top:1px solid var(--border);padding-top:12px}
.palgrid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
.p{height:40px;border:1px solid var(--border);border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:700}
.p.active{outline:2px solid var(--purple)} .p.answered{background:#ecfdf5;border-color:#bbf7d0} .p.not-answered{background:#fee2e2;border-color:#fecaca}
.subwrap{position:sticky;bottom:0;background:#fff;padding-top:12px}
.submit{width:100%;padding:12px 14px;border-radius:10px;border:1px solid var(--blue);background:var(--blue);color:#fff;font-weight:800;cursor:pointer}
/* Result screen */
.result{display:none;max-width:760px;margin:16px auto}
.rbox{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:18px}
.score{font-weight:900;font-size:36px;color:var(--blue);text-align:center}
.subtle{text-align:center;color:#6b7280}
.sol{border:1px solid var(--border);border-radius:10px;padding:12px;margin:12px 0}
.sol .ok{background:#ecfdf5;border:1px solid #bbf7d0;border-radius:8px;padding:8px;margin:6px 0}
.sol .bad{background:#fee2e2;border:1px solid #fecaca;border-radius:8px;padding:8px;margin:6px 0}
@media(max-width:1000px){.main{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="top">
    <div class="bcrumb">DSBM (Drug Store and Business Management) Mock Test</div>
    <span class="bchip">DSBM</span>
    <div class="tsp"></div>
    <div class="timer">Time Left: <span id="timer">--:--</span></div>
  </div>

  <div id="exam" class="main">
    <!-- Center paper -->
    <section class="card">
      <div class="qhdr">
        <div class="pill green">+4</div>
        <div class="pill red">-1</div>
        <div style="flex:1"></div>
        <button class="btn ghost" onclick="toggleReview()">★ Mark for review</button>
      </div>

      <div class="qwrap">
        <div class="qid" id="qid">Question-1</div>
        <div class="qtext" id="qtext"></div>
        <div id="opts"></div>
      </div>

      <div class="bottom">
        <button class="btn ghost" onclick="prevQ()">‹ Previous</button>
        <div style="display:flex;gap:8px">
          <button class="btn ghost" onclick="clearResp()">Clear Response</button>
          <button class="btn primary" onclick="saveNext()">Save & Next ›</button>
        </div>
      </div>
    </section>

    <!-- Right sidebar -->
    <aside class="card sidebar">
      <div class="user">
        <div class="uav">H</div>
        <div>
          <div class="uname">Harsh</div>
          <div style="color:#6b7280;font-size:12px">Section</div>
        </div>
      </div>

      <div class="stat">
        <div class="statrow"><span class="sdot sgreen"></span> <b id="sAns">0</b> Answered</div>
        <div class="statrow"><span class="sdot sred"></span> <b id="sNot">0</b> Not Answered</div>
        <div class="statrow"><span class="sdot spurple"></span> <b id="sRev">0</b> Marked for Review</div>
        <div class="statrow"><span class="sdot sgrey"></span> <b id="sNov">0</b> Not Visited</div>
      </div>

      <div class="palet">
        <div style="font-weight:700;margin-bottom:8px">DSBM</div>
        <div id="pal" class="palgrid"></div>
      </div>

      <div class="subwrap">
        <button class="submit" onclick="finish()">Submit Test</button>
      </div>
    </aside>
  </div>

  <!-- Result -->
  <div id="result" class="result">
    <div class="rbox">
      <div class="score" id="score">0</div>
      <div class="subtle" id="outof">OUT OF 0</div>
      <div style="height:1px;background:#e5e7eb;margin:14px 0"></div>
      <div id="summary" style="text-align:center"></div>
    </div>
    <div id="solutions" class="rbox" style="margin-top:16px"></div>
  </div>

<script>
const QUESTIONS = [{"id": "654fde672678fd431be9543a", "text": "Which of the\nfollowing is correct channel of distribution ?", "options": ["Manufacture-Wholesaler-Retailer-Consumer", "Manufacture-Wholesaler-\n-Consumer- Retailer", "Manufacture-Consumer-\nRetailer - Wholesaler", "Manufacture-Consumer-\nRetailer – Wholesaler- Retailer"], "correct_index": 0, "solution": "Manufacture-Wholesaler-Retailer-Consumer"}, {"id": "654fde672678fd9fb1e95377", "text": "Banking,\ninsurance, transportation are the types of industrial activity", "options": ["Primary", "Secondary", "Tertiary", "Quaternary"], "correct_index": 2, "solution": "Tertiary"}, {"id": "654fde672678fd5474e95381", "text": "Choose the\nincorrect statement about company", "options": ["Artificial\nperson", "Vast financial\nresources", "Unlimited\nliabilities", "Expert\nmanagement"], "correct_index": 2, "solution": "Unlimited\nliabilities"}, {"id": "654fde672678fd0034e95412", "text": "Which one of the\ngiven is not a middleman?", "options": ["Retailer", "Whole seller", "Distributor", "Consumer"], "correct_index": 3, "solution": "Consumer"}, {"id": "654fde672678fd1868e95359", "text": "Which of the\nfollowing is not an economic activity?", "options": ["A lawyer\npracticing law", "A doctor\npracticing", "A student\nplaying cricket", "A peddler\nselling books"], "correct_index": 2, "solution": "A student\nplaying cricket"}, {"id": "654fde672678fd1270e9542b", "text": "In ABC analysis\nof inventory control group A items means", "options": ["20% item that\nconsume 20% budget", "10% item that\nconsume 70% budget", "70% item that\nconsume 10% budget", "50% item that\nconsume 50% budget"], "correct_index": 1, "solution": "10% item that\nconsume 70% budget"}, {"id": "654fde672678fde0b7e95408", "text": "A pull scale\npromotion strategy concentrates on the", "options": ["Producer", "Consumer", "Publicity", "Middlemen"], "correct_index": 1, "solution": "Consumer"}, {"id": "654fde672678fde939e953e5", "text": "Ordinary or\nequity shareholders", "options": ["Does not enjoy a\nfixed rate of dividend", "Get dividend\nafter preference shareholders are satisdfied", "Do not get any\ndividend if no surplus of profit is left after preference\nshareholders are paid off", "All of the above"], "correct_index": 3, "solution": "All of the above"}, {"id": "654fde672678fd6109e9543f", "text": "Following is an\nexample of on the job training except", "options": ["Sensitivity\ntraining", "Coaching &\ncounselling", "Vestibule\ntraining", "Job rotation"], "correct_index": 0, "solution": "Sensitivity\ntraining"}, {"id": "654fde672678fd864ae953ae", "text": "Schedule-3\npart-1 of the company Act 2013, deals with", "options": ["Format of\nbalance sheet", "Format of profit\nand loss", "Format of cash\nflow", "Format of\ntrading account"], "correct_index": 0, "solution": "Format of\nbalance sheet"}, {"id": "654fde672678fdfd3ce9544e", "text": "Minimum area\nrequirement of a medical store", "options": ["10 sq.m.", "20 sq.m.", "30 sq.m.", "5 sq.m."], "correct_index": 0, "solution": "10 sq.m."}, {"id": "654fde672678fd7f6be9539a", "text": "A member of a\ncompany is", "options": ["Director", "Broker", "Promoter", "Registered\nshareholder"], "correct_index": 3, "solution": "Registered\nshareholder"}, {"id": "654fde672678fd85d6e953e0", "text": "Dividends are\npayable to the", "options": ["Shareholders", "Board of\ndirectors", "Debenture\nholders", "All of the above"], "correct_index": 0, "solution": "Shareholders"}, {"id": "654fde672678fd6f25e95426", "text": "In VED analysis\nof inventory control, V item means", "options": ["Vital items", "Various items", "Very expensive\nitems", "Variable in\ndemand"], "correct_index": 0, "solution": "Vital items"}, {"id": "654fde672678fd32a8e953a9", "text": "The minimum\nnumber of members required for registration of a co-operative\nsociety is", "options": ["2", "7", "10", "15"], "correct_index": 2, "solution": "10"}, {"id": "654fde672678fdf5d6e953c7", "text": "Deferred share\ncan be issued by the", "options": ["Private company", "Government\ncompany", "Public company", "Subsidiary of\npublic company"], "correct_index": 0, "solution": "Private company"}, {"id": "654fde672678fdbb84e953f9", "text": "Retailers also\nknown as", "options": ["Shopkeepers", "Agent", "Suppliers", "Middlemen"], "correct_index": 3, "solution": "Middlemen"}, {"id": "654fde672678fd03b8e95395", "text": "Maximum members\nin a public company is", "options": ["50", "200", "5000", "No limit"], "correct_index": 3, "solution": "No limit"}, {"id": "654fde672678fdc541e953d6", "text": "Control of\nmanagement of the company mainly vests in", "options": ["Equity\nshareholders", "Preference\nshareholders", "Shareholders", "Debenture"], "correct_index": 0, "solution": "Equity\nshareholders"}, {"id": "654fde672678fd3cc4e9534f", "text": "In ABC analysis\nof inventory control group B items means", "options": ["20% item that\nconsume 20% budget", "10% item that\nconsume 70% budget", "70% item that\nconsume 10% budget", "50% item that\nconsume 50% budget"], "correct_index": 0, "solution": "20% item that\nconsume 20% budget"}, {"id": "654fde672678fd676de953ea", "text": "Activities\nPerform by the middlemen is\\are?", "options": ["Personal selling", "Market research", "Advertising", "All of the above"], "correct_index": 3, "solution": "All of the above"}, {"id": "654fde672678fd3783e95417", "text": "In ABC analysis\nof stick control, which of the following is true regards to C\nCategory items?", "options": ["They have no\ncontrol", "They have less\ntight control", "They have tight\ncontrol", "They have simple\npossible control"], "correct_index": 3, "solution": "They have simple\npossible control"}, {"id": "654fde672678fdcde9e95421", "text": "Objective of\ninventory control is", "options": ["Reduce cost of\nproduction", "Reduce the size\nof investment", "Better sale\nthrough improved service to customer", "All of the above"], "correct_index": 3, "solution": "All of the above"}, {"id": "654fde672678fd1a30e953d1", "text": "The return of\nshares to the company for cancellation is known as", "options": ["Transmission of\nshares", "Surrender of\nshares", "Redeemable\nshares", "Irredeemable\nshares"], "correct_index": 1, "solution": "Surrender of\nshares"}, {"id": "654fde672678fd2e81e95453", "text": "Full form of ABC\nanalysis is?", "options": ["Always Better\nControl", "Always Bright\nControl", "Always Buyer\nControl", "Always\nBureaucratic Control"], "correct_index": 0, "solution": "Always Better\nControl"}, {"id": "654fde672678fd4504e95430", "text": "The time period\nbetween placing an order and its receipt in stock is known as", "options": ["Carrying time", "Over time", "Shortage time", "Lead time"], "correct_index": 3, "solution": "Lead time"}, {"id": "654fde672678fd4fc0e95368", "text": "Which one of the\nfollowing is not a primary industrial activity?", "options": ["Mining", "Nursery", "Fish farming", "Textile"], "correct_index": 3, "solution": "Textile"}, {"id": "654fde672678fd09e3e953fe", "text": "A middlemen in\ndirect contact with the customers is", "options": ["wholesaler", "Agent", "Suppliers", "Retailer"], "correct_index": 3, "solution": "Retailer"}, {"id": "654fde672678fd6889e95354", "text": "Which of the\nfollowing is an economic activity?", "options": ["A social worker", "A teacher\nteaching his daughter", "A farmer in the\nfield", "A social worker\nin the relief camp"], "correct_index": 2, "solution": "A farmer in the\nfield"}, {"id": "654fde672678fd3e2ae95449", "text": "Which middlemen\nbring the buyer and the seller into contact?", "options": ["Broker", "Wholesaler", "Commission agent", "Auctioneer"], "correct_index": 0, "solution": "Broker"}, {"id": "654fde672678fdd46ce95458", "text": "ABC analysis is\nbased on which law?", "options": ["Pareto’s\n80\\20 Law", "Pascal’s\n80\\20 law", "Pythagoras 80\\20\nlaw", "Padma 80\\20 law"], "correct_index": 0, "solution": "Pareto’s\n80\\20 Law"}, {"id": "654fde672678fd7ee3e9541c", "text": "ABC analysis for\ninventory control is based on", "options": ["Item criteria", "Storing criteria", "Cost criteria", "Material\nCriteria"], "correct_index": 2, "solution": "Cost\ncriteria"}, {"id": "654fde672678fdfe32e953cc", "text": "Which types of\nshareholders Does not have voting right?", "options": ["Ordinary\nshareholders", "Equity\nshareholders", "Preference\nshareholders", "Deferred\nshareholders"], "correct_index": 2, "solution": "Preference\nshareholders"}, {"id": "654fde672678fd5d1ce953ef", "text": "A person\npurchases goods and sell in his own name is known as?", "options": ["Merchant\nmiddlemen", "Functional\nmiddlemen", "Agent", "Broker"], "correct_index": 0, "solution": "Merchant\nmiddlemen"}, {"id": "654fde672678fd456be9539f", "text": "A Joint stock\ncompany is governed by", "options": ["Companies Act\n2005", "Companies Act\n1995", "Companies Act\n2013", "Companies Act\n2000"], "correct_index": 2, "solution": "Companies Act\n2013"}, {"id": "654fde672678fddd19e9537c", "text": "Research and\ndevelopment are the types of industrial activity", "options": ["Primary", "Secondary", "Tertiary", "Quaternary"], "correct_index": 3, "solution": "Quaternary"}, {"id": "654fde672678fd47afe953b3", "text": "Which types of\nshareholders are the real owner of the company?", "options": ["Equity\nshareholders", "Preference\nshareholders", "Deferred\nshareholders", "Debenture"], "correct_index": 0, "solution": "Equity\nshareholders"}, {"id": "654fde672678fd06f3e953db", "text": "The difference\nbetween the actual price and the excess price of a share is called", "options": ["Surplus", "Discount", "Premium", "Forteiture"], "correct_index": 2, "solution": "Premium"}, {"id": "654fde672678fd90d3e95372", "text": "Manufacturing\nand construction are the types of industrial activity", "options": ["Primary", "Secondary", "Tertiary", "Quaternary"], "correct_index": 1, "solution": "Secondary"}, {"id": "654fde672678fdfbece953bd", "text": "Which of the\nfollowing investment is very risky?", "options": ["Land", "Debentures", "Equity shares", "Preference\nshares"], "correct_index": 2, "solution": "Equity shares"}, {"id": "654fde672678fd3a65e953c2", "text": "Among the given\nis entitled to pay interest\\dividends even if the company does not\nearn profit", "options": ["Equity share", "Debentures", "Preference\nshares", "All of the above"], "correct_index": 1, "solution": "Debentures"}, {"id": "654fde672678fd3b88e95386", "text": "Private limited\ncompanies should have at least ------------------ members", "options": ["1", "2", "3", "7"], "correct_index": 1, "solution": "2"}, {"id": "654fde672678fdd941e95435", "text": "SEBI Stand for", "options": ["Security\nexchanges board of India", "Share exchange\nboard of India", "Stock exchange\nboard India", "Simple Equity\nbank income"], "correct_index": 0, "solution": "Security\nexchanges board of India"}, {"id": "654fde672678fd761be95403", "text": "The basic\nconcept of push strategy is to encourage the", "options": ["Producer", "Consumer", "Publicity", "Middlemen"], "correct_index": 3, "solution": "Middlemen"}, {"id": "654fde672678fd3ad8e953a4", "text": "A government\ncompany is one on which", "options": ["At least 51% of\nthe capital is held by the central and\\or state government", "50% of the\ncapital is held by central and 50% by state government", "The entire share\ncapital is held by the central and\\or state government", "All of the above"], "correct_index": 3, "solution": "All of the above"}, {"id": "654fde672678fd5570e953f4", "text": "A seller borrows\nthe goods and services from different middlemen to pass", "options": ["Fake users", "Retailers", "Actual users", "Wholesalers"], "correct_index": 2, "solution": "Actual users"}, {"id": "654fde672678fd5c11e953b8", "text": "Preference\nshareholders are right in respect of", "options": ["Dividends", "Repayment of\ncapital", "Both dividends\nand repayment of capital", "Elect board of\ndirector and frame policies of company"], "correct_index": 2, "solution": "Both dividends\nand repayment of capital"}, {"id": "654fde672678fd47ece95444", "text": "The middlemen\nhelp to stabilizes the price by", "options": ["Sales of goods", "Distribution of\ngoods", "Stocking of\ngoods", "Marketing of\ngoods"], "correct_index": 2, "solution": "Stocking of\ngoods"}, {"id": "654fde672678fd659be9538b", "text": "Minimum Number\nof shareholders in a company is per company Act 2013", "options": ["2", "3", "7", "15"], "correct_index": 2, "solution": "7"}, {"id": "654fde672678fd652ae9536d", "text": "Mining,\nextraction and farming are the types of industrial activity", "options": ["Primary", "Secondary", "Tertiary", "Quaternary"], "correct_index": 0, "solution": "Primary"}, {"id": "654fde672678fd6950e95390", "text": "The maximum\nmembers of a private limited company as per company Act 2013", "options": ["10", "20", "40", "200"], "correct_index": 3, "solution": "200"}, {"id": "654fde672678fd7554e95363", "text": "The breeding of\nplant and animals is termed as", "options": ["Extractive\nindustry", "Genetic industry", "Construction\nindustry", "Manufacturing\nindustry"], "correct_index": 1, "solution": "Genetic industry"}, {"id": "654fde672678fdfa84e9535e", "text": "Professional\ninvolves in", "options": ["Undertaking a\nbusiness", "Undertaking a\ncontract", "Rendering of\npersonal service", "None of the\nabove"], "correct_index": 2, "solution": "Rendering of\npersonal service"}, {"id": "654fde672678fda862e9540d", "text": "A middlemen\nbetween producer and retailer is", "options": ["Consumer", "Whole seller", "Retailer", "None of the\nabove"], "correct_index": 1, "solution": "Whole seller"}];
const POS = 4; const NEG = -1;
let TOTAL_SECONDS = 2700;

let current=0;
let answers = new Array(QUESTIONS.length).fill(null);
let visited = new Array(QUESTIONS.length).fill(false);
let review  = new Array(QUESTIONS.length).fill(false);
let timerInterval;

function renderQ(i){
  current=i; visited[i]=true;
  const q = QUESTIONS[i] || {};
  document.getElementById('qid').textContent = 'Question-'+(i+1);
  document.getElementById('qtext').textContent = q.text || '';
  const box = document.getElementById('opts'); box.innerHTML='';
  (q.options||[]).forEach((op,j)=>{
    const row = document.createElement('label'); row.className='opt'+(answers[i]===j?' selected':'');
    const dot = document.createElement('span'); dot.className='rdot';
    const input = document.createElement('input'); input.type='radio'; input.name='q'+i; input.value=String(j); input.style.display='none';
    input.checked = (answers[i]===j);
    input.onchange = ()=>{ answers[i]=j; renderQ(i); refreshStats(); };
    row.appendChild(dot); row.appendChild(input); row.append(' '+op);
    row.onclick = (ev)=>{ if(ev.target.tagName!=='INPUT'){ input.checked=true; input.dispatchEvent(new Event('change')); } };
    box.appendChild(row);
  });
  highlightPalette();
}

function buildPalette(){
  const pal = document.getElementById('pal'); pal.innerHTML='';
  for(let i=0;i<QUESTIONS.length;i++){
    const d = document.createElement('div'); d.className='p'; d.textContent = i+1;
    d.onclick=()=>renderQ(i); pal.appendChild(d);
  }
  highlightPalette(); refreshStats();
}
function highlightPalette(){
  const pal = document.getElementById('pal').children;
  for(let i=0;i<pal.length;i++){
    let cls='p';
    if(!visited[i]){}
    else if(answers[i]===null && !review[i]) cls+=' not-answered';
    else if(answers[i]!==null && review[i]) cls+=' answered'; // treat as answered for color; review tracked separately
    else if(answers[i]!==null) cls+=' answered';
    else if(review[i]) cls+=' not-answered';
    if(i===current) cls+=' active';
    pal[i].className = cls;
  }
}
function refreshStats(){
  const pal = document.getElementById('pal').children;
  let ans=0, na=0, rev=0, nv=0;
  for(let i=0;i<pal.length;i++){
    if(!visited[i]) nv++;
    if(review[i]) rev++;
    if(visited[i] && answers[i]===null) na++;
    if(answers[i]!==null) ans++;
  }
  document.getElementById('sAns').textContent=ans;
  document.getElementById('sNot').textContent=na;
  document.getElementById('sRev').textContent=rev;
  document.getElementById('sNov').textContent=nv;
}
function prevQ(){ if(current>0) renderQ(current-1); }
function saveNext(){ if(current<QUESTIONS.length-1) renderQ(current+1); }
function clearResp(){ answers[current]=null; renderQ(current); refreshStats(); }
function toggleReview(){ review[current]=!review[current]; highlightPalette(); refreshStats(); }

function finish(){
  // stop timer
  if (typeof timerInterval!=='undefined') try{ clearInterval(timerInterval); }catch(e){}

  let score=0,correct=0,wrong=0,attempted=0;
  for(let i=0;i<QUESTIONS.length;i++){
    const c=(QUESTIONS[i]||{}).correct_index;
    const a=answers[i];
    if(a!==null) attempted++;
    if(c==null || a==null) continue;
    if(Number(a)===Number(c)) {score+=POS;correct++;} else {score+=NEG;wrong++;}
  }
  const unattempted = QUESTIONS.length - attempted;

  // hide exam, show results
  document.getElementById('exam').style.display='none';
  document.getElementById('result').style.display='block';

  document.getElementById('score').textContent = String(score);
  document.getElementById('outof').textContent = 'OUT OF '+(POS*QUESTIONS.length);
  document.getElementById('summary').innerHTML =
    'Correct: <b>'+correct+'</b> &nbsp; | &nbsp; Wrong: <b>'+wrong+
    '</b> &nbsp; | &nbsp; Unattempted: <b>'+unattempted+'</b>';

  // solutions
  const sol = document.getElementById('solutions');
  let h='';
  for(let i=0;i<QUESTIONS.length;i++){
    const q=QUESTIONS[i]||{}; const c=q.correct_index; const a=answers[i];
    h += '<div class="sol"><div style="font-weight:700;margin-bottom:6px">Q.'+(i+1)+'</div>';
    (q.options||[]).forEach((op,j)=>{
      let cls='';
      if(c!=null && j===c) cls=' ok';
      else if(a!=null && j===a && c!=null && a!==c) cls=' bad';
      h += '<div class="'+cls+'" >'+op+'</div>';
    });
    if(q.solution) h += '<div style="margin-top:6px;color:#334155"><small><b>Solution:</b> '+q.solution+'</small></div>';
    h += '</div>';
  }
  sol.innerHTML = h;
  window.scrollTo(0,0);
}

/* Timer */
function startTimer(){
  if (!TOTAL_SECONDS) return;
  const t = document.getElementById('timer');
  function tick(){
    let m = Math.floor(TOTAL_SECONDS/60);
    let s = TOTAL_SECONDS%60;
    t.textContent = String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
    if (TOTAL_SECONDS<=0) { clearInterval(timerInterval); return; }
    TOTAL_SECONDS -= 1;
  }
  tick(); timerInterval = setInterval(tick, 1000);
}

document.addEventListener('DOMContentLoaded', ()=>{
  document.title = 'DSBM (Drug Store and Business Management) Mock Test';
  buildPalette();
  if(QUESTIONS.length) renderQ(0);
  startTimer();
});
</script>
</body></html>
